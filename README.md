Based on http://bfnightly.bracketproductions.com/rustbook/chapter_4.html